{
	"relink": [
		"// % Create Symbolic links between package folders and public folders.",
		"@sudo on",
		"capture PWD pwd",
		"rm -f {PWD}/public/theme/orange",
		"rm -f {PWD}/public/assets/backorder",
		"rm -f {PWD}/public/assets/stock-status-check",
		"ln -s {PWD}/packages/projectorangebox/theme-orange/public/theme/orange {PWD}/public/theme/orange",
		"ln -s {PWD}/packages/quadratec/backorder/public/assets/backorder {PWD}/public/assets/backorder",
		"ln -s {PWD}/packages/quadratec/stock-status-check/public/assets/stock-status-check {PWD}/public/assets/stock-status-check"
	],
	"copy public": [
		"// % Copy complete folders between package folders and public folders.",
		"@sudo on",
		"capture PWD pwd",
		"cp -R {PWD}/packages/projectorangebox/theme-orange/public/theme/orange {PWD}/public/theme/orange",
		"cp -R {PWD}/packages/quadratec/backorder/public/assets/backorder {PWD}/public/assets/backorder",
		"cp -R {PWD}/packages/quadratec/stock-status-check/public/assets/stock-status-check {PWD}/public/assets/stock-status-check"
	],
	"clear sessions": [
		"// % Delete all files in the session folder.",
		"@sudo on",
		"capture PWD pwd",
		"rm -f {PWD}/var/sessions/*"
	],
	"clear caches": [
		"// % Delete all files in the cache, uploads, downloads folders.",
		"@sudo on",
		"capture PWD pwd",
		"rm -fdr {PWD}/var/cache/*",
		"rm -fdr {PWD}/var/uploads/*",
		"rm -fdr {PWD}/var/downloads/*"
	],
	"repair": [
		"// % Repair folder permissions.",
		"@sudo on",
		"capture PWD pwd",
		"import array {PWD}/.env",
		"mkdir -p {PWD}/bin",
		"mkdir -p {PWD}/support",
		"mkdir -p {PWD}/support/migrations",
		"mkdir -p {PWD}/support/backups",
		"mkdir -p {PWD}/public/assets",
		"mkdir -p {PWD}/public/theme",
		"mkdir -p {PWD}/var",
		"mkdir -p {PWD}/var/cache",
		"mkdir -p {PWD}/var/uploads",
		"mkdir -p {PWD}/var/downloads",
		"mkdir -p {PWD}/var/emails",
		"mkdir -p {PWD}/var/logs",
		"mkdir -p {PWD}/var/sessions",
		"find {PWD} -type f -print0 | sudo xargs -0 chmod 664",
		"find {PWD} -type d -print0 | sudo xargs -0 chmod 775",
		"find {PWD} -type f -print0 | sudo xargs -0 chown {CHOWN}",
		"find {PWD} -type d -print0 | sudo xargs -0 chown {CHOWN}",
		"find {PWD} -type f -print0 | sudo xargs -0 chgrp {CHGRP}",
		"find {PWD} -type d -print0 | sudo xargs -0 chgrp {CHGRP}",
		"chmod -Rf 777 {PWD}/var",
		"chmod -Rf 777 {PWD}/var/cache/*",
		"chmod -Rf 777 {PWD}/var/uploads/*",
		"chmod -Rf 777 {PWD}/var/downloads/*",
		"chmod -Rf 777 {PWD}/var/emails/*",
		"chmod -Rf 777 {PWD}/var/logs/*",
		"chmod -Rf 777 {PWD}/var/sessions/*",
		"chmod -Rf 777 {PWD}/bin/*",
		"chmod -Rf 777 {PWD}/support/backups"
	],
	"git update": [
		"// % Fetch and Reset all git Modules.",
		"@sudo on",
		"capture PWD pwd",
		"gitx update {PWD} {GITBRANCH}",
		"gitx update {PWD}/packages/quadratec/backorder {GITBRANCH}",
		"gitx update {PWD}/packages/quadratec/stock-status-check {GITBRANCH}",
		"gitx update {PWD}/packages/quadratec/drop-ships {GITBRANCH}",
		"gitx update {PWD}/packages/quadratec/affirm {GITBRANCH}",
		"gitx update {PWD}/packages/quadratec/status-board {GITBRANCH}",
		"gitx update {PWD}/packages/quadratec/gift-certificate {GITBRANCH}",
		"gitx update {PWD}/packages/misc/opcache {GITBRANCH}",
		"gitx update {PWD}/packages/misc/config-viewer {GITBRANCH}",
		"gitx update {PWD}/packages/misc/librarian {GITBRANCH}",
		"gitx update {PWD}/packages/misc/cache-viewer {GITBRANCH}",
		"gitx update {PWD}/packages/misc/login-success {GITBRANCH}",
		"gitx update {PWD}/packages/misc/general_addons {GITBRANCH}",
		"gitx update {PWD}/packages/misc/scaffolding {GITBRANCH}",
		"gitx update {PWD}/packages/projectorangebox/extra-validations {GITBRANCH}",
		"gitx update {PWD}/packages/projectorangebox/migrations {GITBRANCH}",
		"gitx update {PWD}/packages/projectorangebox/orange {GITBRANCH}",
		"gitx update {PWD}/packages/projectorangebox/theme-orange {GITBRANCH}"
	],
	"git status": [
		"// % Show the GIT branches of the projects git folders.",
		"@sudo on",
		"capture PWD pwd",
		"gitx status {PWD}"
	],
	"complete database backup": [
		"// % Backup the entire database.",
		"@sudo on",
		"capture PWD pwd",
		"import array {PWD}/.env",
		"capture FILE_DATE 'date +%m%d%y_%H%M'",
		"mkdir -p {PWD}/support/backups",
		"chmod -f 777 {PWD}/support/backups",
		"mysqldump --extended-insert=FALSE --add-drop-table --add-drop-trigger --create-options --password={DBBACKUPPASSWORD} --events --routines --single-transaction --triggers --user={DBBACKUPUSER} --databases {DBBACKUPDATABASE} | gzip -9 > {PWD}/support/backups/{FILE_DATE}.{DBBACKUPDATABASE}.sql.gz"
	],
	"backup database data": [
		"// % Backup only the database data.",
		"@sudo on",
		"capture PWD pwd",
		"import array {PWD}/.env",
		"capture FILE_DATE 'date +%m%d%y_%H%M'",
		"mkdir -p {PWD}/support/backups",
		"chmod -f 777 {PWD}/support/backups",
		"mysqldump --extended-insert=FALSE --add-drop-table --password={DBBACKUPPASSWORD} --user={DBBACKUPUSER} --databases {DBBACKUPDATABASE} | gzip -9 > {PWD}/support/backups/{FILE_DATE}.data.{DBBACKUPDATABASE}.sql.gz"
	],
	"import gz database dump": [
		"// % Import a GZIP database Dump.",
		"@sudo on",
		"capture PWD pwd",
		"import array {PWD}/.env",
		"readline FILENAME 'Enter Filename: '",
		"e 'Using: {PWD}/support/backups/{FILENAME}'",
		"zcat {PWD}/support/backups/{FILENAME} | mysql --user={DBBACKUPUSER} --password={DBBACKUPPASSWORD} {DBBACKUPDATABASE}"
	],
	"import database dump": [
		"// % Import a Non GZIP database Dump.",
		"@sudo on",
		"capture PWD pwd",
		"import array {PWD}/.env",
		"readline FILENAME 'Enter Filename: '",
		"e 'Using: {PWD}/support/backups/{FILENAME}'",
		"cat {PWD}/support/backups/{FILENAME} | mysql --user={DBBACKUPUSER} --password={DBBACKUPPASSWORD} {DBBACKUPDATABASE}"
	],
	"migrate": [
		"// % Run migration Up.",
		"capture PWD pwd",
		"@stdout on",
		"cd {PWD}/public;php index.php cli/migrate/up",
		"cd {PWD}/public;php index.php cli/migrate/up packages/projectorangebox/scaffolding"
	],
	"site up": [
		"// % Site Up.",
		"@sudo on",
		"capture PWD pwd",
		"chmod -f 777 {PWD}/public",
		"rm {PWD}/public/index.html",
		"chmod -f 775 {PWD}/public"
	],
	"site down": [
		"// % Site Down.",
		"@sudo on",
		"capture PWD pwd",
		"chmod -f 777 {PWD}/public",
		"cp {PWD}/support/site_down.html {PWD}/public/index.html",
		"chmod -f 775 {PWD}/public"
	],
	"complete": [
		"// % Run Complete Site Update.",
		"task 'complete database backup'",
		"task 'site down'",
		"task 'git update'",
		"task repair",
		"task 'clear caches'",
		"task 'clear sessions'",
		"task relink",
		"task 'site up'",
		"task 'git status'"
	],
	"basic": [
		"// % Run Basic Site Update.",
		"task 'backup database data'",
		"task 'git basic update'",
		"task repair",
		"task 'clear caches'",
		"task relink",
		"task 'git status'"
	]
}