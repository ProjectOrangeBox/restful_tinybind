var storage={storage:void 0,config:{dbPrefix:"{superStorge}",storage:"localStorage",defaultSecondCache:31622400},getItem:function(e,t){var r=this._getByComplete(this.config.dbPrefix+e);return Math.floor((new Date).getTime()/1e3)>r.expires&&(this.removeItem(e),r=this._emptyRecord()),r.data?r.data:t},removeItem:function(e,t){this.capable()&&(e=t?e:this.config.dbPrefix+e,console.debug("removing",e),this.storage.removeItem(e))},clear:function(){this.removeOlderThan()},getDetailed:function(e){return this._getByComplete(this.config.dbPrefix+e)},removeOlderThan:function(e){var t=Object.keys(this.storage),r=t.length,i=Math.floor((new Date).getTime()/1e3);e=e||0;for(var o=0;o<r;o++){var a=t[o];if(a.startsWith(this.config.dbPrefix))this._getByComplete(a).created+e<i&&this.removeItem(a,!0)}},setItem:function(t,r,i){if(this.capable()){var e=Math.floor((new Date).getTime()/1e3);i=void 0===i?this.config.defaultSecondCache:parseInt(i);try{var o=this.config.dbPrefix+t;return this.storage.setItem(o,JSON.stringify({data:r,created:e,expires:e+i,life:i})),!0}catch(e){return this.removeItem(this._findOldest(),!0),this.setItem(t,r,i),!1}}},_getByComplete:function(e){var t=this._emptyRecord();if(this.capable()){console.debug("reading",e);var r=this.storage[e];t=r?JSON.parse(r):t}return t},_emptyRecord:function(){return{expires:-1,created:-1,data:void 0}},_findOldest:function(){for(var e=Object.keys(this.storage),t=e.length,r=0,i=0,o=0;o<t;o++){var a=e[o];if(a.startsWith(this.config.dbPrefix)){var s=this._getByComplete(a);(s.created<i||0===i)&&(r=a,i=s.created)}}return r},capable:function(e){if(void 0===this.storage){e=e||this.config.storage;try{this.storage=window[e];var t="__storage_test__";this.storage.setItem(t,t),this.storage.removeItem(t)}catch(e){this.storage=void 0}}return void 0!==this.storage}};
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.tinybind=e()}(this,function(){"use strict";var s=["prefix","templateDelimiters","rootInterface","preloadData","handler"],a=["binders","formatters","adapters"],n=/^'.*'$|^".*"$/;function e(t){var e=0,i=t;return n.test(t)?i=t.slice(1,-1):"true"===t?i=!0:"false"===t?i=!1:"null"===t?i=null:"undefined"===t?i=void 0:isNaN(t)?e=1:i=Number(t),{type:e,value:i}}function c(t,e){for(var i,n=t.length,r=0,s=0,a=e[0],o=e[1];s<n;){if((r=t.indexOf(a,s))<0){i&&i.push({type:0,value:t.slice(s)});break}if(i||(i=[]),0<r&&s<r&&i.push({type:0,value:t.slice(s,r)}),s=r+a.length,(r=t.indexOf(o,s))<0){var h=t.slice(s-o.length),c=i[i.length-1];c&&0===c.type?c.value+=h:i.push({type:0,value:h});break}var u=t.slice(s,r).trim();i.push({type:1,value:u}),s=r+o.length}return i}var o,h,i,b={binders:{},formatters:{},adapters:{},_prefix:"rv",_fullPrefix:"rv-",get prefix(){return this._prefix},set prefix(t){this._prefix=t,this._fullPrefix=t+"-"},parseTemplate:c,parseType:e,templateDelimiters:["{","}"],rootInterface:".",preloadData:!0,handler:function(t,e,i){this.call(t,e,i.view.models)},fallbackBinder:function(t,e){null!=e?t.setAttribute(this.type,e):t.removeAttribute(this.type)},configure:function(t){var n=this;t&&Object.keys(t).forEach(function(e){var i=t[e];-1<a.indexOf(e)?Object.keys(i).forEach(function(t){n[e][t]=i[t]}):n[e]=i})}};function u(t){return"object"==typeof t&&null!==t}function l(t,e,i){this.keypath=e,this.callback=i,this.objectPath=[],this.parse(),this.obj=this.getRootObject(t),u(this.target=this.realize())&&this.set(!0,this.key,this.target,this.callback)}l.updateOptions=function(t){o=t.adapters,h=Object.keys(o),i=t.rootInterface},l.tokenize=function(t,e){var i,n,r=[],s={i:e,path:""};for(i=0;i<t.length;i++)n=t.charAt(i),~h.indexOf(n)?(r.push(s),s={i:n,path:""}):s.path+=n;return r.push(s),r},l.prototype.parse=function(){var t,e;h.length||function(t){throw new Error("[Observer] "+t)}("Must define at least one adapter interface."),t=~h.indexOf(this.keypath[0])?(e=this.keypath[0],this.keypath.substr(1)):(e=i,this.keypath),this.tokens=l.tokenize(t,e),this.key=this.tokens.pop()},l.prototype.realize=function(){for(var t,e,i=this.obj,n=-1,r=0;r<this.tokens.length;r++)e=this.tokens[r],u(i)?(void 0!==this.objectPath[r]?i!==(t=this.objectPath[r])&&(this.set(!1,e,t,this),this.set(!0,e,i,this),this.objectPath[r]=i):(this.set(!0,e,i,this),this.objectPath[r]=i),i=this.get(e,i)):(-1===n&&(n=r),(t=this.objectPath[r])&&this.set(!1,e,t,this));return-1!==n&&this.objectPath.splice(n),i},l.prototype.sync=function(){var t,e,i;(t=this.realize())!==this.target?(u(this.target)&&this.set(!1,this.key,this.target,this.callback),u(t)&&this.set(!0,this.key,t,this.callback),e=this.value(),this.target=t,((i=this.value())!==e||i instanceof Function)&&this.callback.sync()):t instanceof Array&&this.callback.sync()},l.prototype.value=function(){if(u(this.target))return this.get(this.key,this.target)},l.prototype.setValue=function(t){u(this.target)&&o[this.key.i].set(this.target,this.key.path,t)},l.prototype.get=function(t,e){return o[t.i].get(e,t.path)},l.prototype.set=function(t,e,i,n){var r=t?"observe":"unobserve";o[e.i][r](i,e.path,n)},l.prototype.unobserve=function(){for(var t,e,i=0;i<this.tokens.length;i++)e=this.tokens[i],(t=this.objectPath[i])&&this.set(!1,e,t,this);u(this.target)&&this.set(!1,this.key,this.target,this.callback)},l.prototype.getRootObject=function(t){var e,i;if(!t.$parent)return t;for(e=this.tokens.length?this.tokens[0].path:this.key.path,i=t;i.$parent&&void 0===i[e];)i=i.$parent;return i};var f=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};var d=/[^\s']+|'([^']|'[^\s])*'|"([^"]|"[^\s])*"/g,p=/\s+/,v=function(){function o(t,e,i,n,r,s,a){f(this,o),this.view=t,this.el=e,this.type=i,this.keypath=n,this.binder=r,this.arg=s,this.formatters=a,this.formatterObservers={},this.model=void 0}return o.prototype.observe=function(t,e){return new l(t,e,this)},o.prototype.parseTarget=function(){if(this.keypath){var t=e(this.keypath);0===t.type?this.value=t.value:(this.observer=this.observe(this.view.models,this.keypath),this.model=this.observer.target)}else this.value=void 0},o.prototype.parseFormatterArguments=function(t,s){var a=this;return t.map(e).map(function(t,e){var i=t.type,n=t.value;if(0===i)return n;a.formatterObservers[s]||(a.formatterObservers[s]={});var r=a.formatterObservers[s][e];return r||(r=a.observe(a.view.models,n),a.formatterObservers[s][e]=r),r.value()})},o.prototype.formattedValue=function(t){var o=this;return this.formatters.reduce(function(t,e,i){var n=e.match(d),r=n.shift(),s=o.view.options.formatters[r],a=o.parseFormatterArguments(n,i);return s&&s.read instanceof Function?t=s.read.apply(s,[t].concat(a)):s instanceof Function&&(t=s.apply(void 0,[t].concat(a))),t},t)},o.prototype.eventHandler=function(e){var i=this,n=i.view.options.handler;return function(t){n.call(e,this,t,i)}},o.prototype.set=function(t){t=t instanceof Function&&!this.binder.function?this.formattedValue(t.call(this.model)):this.formattedValue(t);var e=this.binder.routine||this.binder;e instanceof Function&&e.call(this,this.el,t)},o.prototype.sync=function(){this.observer?(this.model=this.observer.target,this.set(this.observer.value())):this.set(this.value)},o.prototype.publish=function(){var o=this;if(this.observer){var t=this.formatters.reduceRight(function(t,e,i){var n=e.split(p),r=n.shift(),s=o.view.options.formatters[r],a=o.parseFormatterArguments(n,i);return s&&s.publish&&(t=s.publish.apply(s,[t].concat(a))),t},this.getValue(this.el));this.observer.setValue(t)}},o.prototype.bind=function(){this.parseTarget(),this.binder.hasOwnProperty("bind")&&this.binder.bind.call(this,this.el),this.view.options.preloadData&&this.sync()},o.prototype.unbind=function(){var i=this;this.binder.unbind&&this.binder.unbind.call(this,this.el),this.observer&&this.observer.unobserve(),Object.keys(this.formatterObservers).forEach(function(t){var e=i.formatterObservers[t];Object.keys(e).forEach(function(t){e[t].unobserve()})}),this.formatterObservers={}},o.prototype.update=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.observer&&(this.model=this.observer.target),this.binder.update&&this.binder.update.call(this,t)},o.prototype.getValue=function(t){return this.binder&&this.binder.getValue?this.binder.getValue.call(this,t):function(t){var e=[];if("checkbox"===t.type)return t.checked;if("select-multiple"!==t.type)return t.value;for(var i=0;i<t.options.length;i++)t.options.item(i).selected&&e.push(t.options.item(i).value);return e}(t)},o}(),y={routine:function(t,e){t.data=null!=e?e:""}},m=/((?:'[^']*')*(?:(?:[^\|']*(?:'[^']*')+[^\|']*)+|[^\|]+))|^$/g,r=function t(e,i){var n=!1;if(3===i.nodeType){var r=c(i.data,b.templateDelimiters);if(r){for(var s=0;s<r.length;s++){var a=r[s],o=document.createTextNode(a.value);i.parentNode.insertBefore(o,i),1===a.type&&e.buildBinding(o,null,a.value,y,null)}i.parentNode.removeChild(i)}n=!0}else 1===i.nodeType&&(n=e.traverse(i));if(!n)for(var h=0;h<i.childNodes.length;h++)t(e,i.childNodes[h])},g=function(t,e){var i=t.binder&&t.binder.priority||0;return(e.binder&&e.binder.priority||0)-i},k=function(t){return t.trim()},O=function(){function n(t,e,i){f(this,n),t.jquery||t instanceof Array?this.els=t:this.els=[t],this.models=e,this.options=i,this.build()}return n.prototype.buildBinding=function(t,e,i,n,r){var s=i.match(m).map(k),a=s.shift();this.bindings.push(new v(this,t,e,a,n,r,s))},n.prototype.build=function(){this.bindings=[];var t,e=this.els,i=void 0;for(i=0,t=e.length;i<t;i++)r(this,e[i]);this.bindings.sort(g)},n.prototype.traverse=function(t){for(var e,i,n,r,s=b._fullPrefix,a="SCRIPT"===t.nodeName||"STYLE"===t.nodeName,o=t.attributes,h=[],c=this.options.starBinders,u=0,l=o.length;u<l;u++){var f=o[u];if(0===f.name.indexOf(s)){if(e=f.name.slice(s.length),r=void 0,!(i=this.options.binders[e]))for(var d=0;d<c.length;d++)if(n=c[d],e.slice(0,n.length-1)===n.slice(0,-1)){i=this.options.binders[n],r=e.slice(n.length-1);break}if(i||(i=b.fallbackBinder),i.block)return this.buildBinding(t,e,f.value,i,r),t.removeAttribute(f.name),!0;h.push({attr:f,binder:i,type:e,arg:r})}}for(var p=0;p<h.length;p++){var v=h[p];this.buildBinding(t,v.type,v.attr.value,v.binder,v.arg),t.removeAttribute(v.attr.name)}return a},n.prototype.bind=function(){this.bindings.forEach(function(t){t.bind()})},n.prototype.unbind=function(){this.bindings.forEach(function(t){t.unbind()})},n.prototype.sync=function(){this.bindings.forEach(function(t){t.sync()})},n.prototype.publish=function(){this.bindings.forEach(function(t){t.binder&&t.binder.publishes&&t.publish()})},n.prototype.update=function(){var e=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};Object.keys(i).forEach(function(t){e.models[t]=i[t]}),this.bindings.forEach(function(t){t.update&&t.update(i)})},n}(),w=["push","pop","shift","unshift","sort","reverse","splice"],t={counter:0,weakmap:{},weakReference:function(t){if(!t.hasOwnProperty("__rv")){var e=this.counter++;Object.defineProperty(t,"__rv",{value:e})}return this.weakmap[t.__rv]||(this.weakmap[t.__rv]={callbacks:{}}),this.weakmap[t.__rv]},cleanupWeakReference:function(t,e){Object.keys(t.callbacks).length||t.pointers&&Object.keys(t.pointers).length||delete this.weakmap[e]},stubFunction:function(r,t){var s=r[t],a=this.weakReference(r),o=this.weakmap;r[t]=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=s.apply(r,e);return Object.keys(a.pointers).forEach(function(t){var e=a.pointers[t];o[t]&&o[t].callbacks[e]instanceof Array&&o[t].callbacks[e].forEach(function(t){t.sync()})}),n}},observeMutations:function(e,t,i){var n=this;if(e instanceof Array){var r=this.weakReference(e);r.pointers||(r.pointers={},w.forEach(function(t){n.stubFunction(e,t)})),r.pointers[t]||(r.pointers[t]=[]),-1===r.pointers[t].indexOf(i)&&r.pointers[t].push(i)}},unobserveMutations:function(t,e,i){if(t instanceof Array&&null!=t.__rv){var n=this.weakmap[t.__rv];if(n){var r=n.pointers[e];if(r){var s=r.indexOf(i);-1<s&&r.splice(s,1),r.length||delete n.pointers[e],this.cleanupWeakReference(n,t.__rv)}}}},observe:function(n,r,t){var s,a=this,e=this.weakReference(n).callbacks;if(!e[r]){e[r]=[];var i=Object.getOwnPropertyDescriptor(n,r);i&&(i.get||i.set||!i.configurable)||(s=n[r],Object.defineProperty(n,r,{enumerable:!0,get:function(){return s},set:function(t){if(t!==s){a.unobserveMutations(s,n.__rv,r),s=t;var e=a.weakmap[n.__rv];if(e){var i=e.callbacks[r];i&&i.forEach(function(t){t.sync()}),a.observeMutations(t,n.__rv,r)}}}}))}-1===e[r].indexOf(t)&&e[r].push(t),this.observeMutations(n[r],n.__rv,r)},unobserve:function(t,e,i){var n=this.weakmap[t.__rv];if(n){var r=n.callbacks[e];if(r){var s=r.indexOf(i);-1<s&&(r.splice(s,1),r.length||(delete n.callbacks[e],this.unobserveMutations(t[e],t.__rv,e))),this.cleanupWeakReference(n,t.__rv)}}},get:function(t,e){return t[e]},set:function(t,e,i){t[e]=i}},E=function(t){return null!=t?t.toString():void 0};function _(t,e,i){var n=t.el.cloneNode(!0),r=new O(n,e,t.view.options);return r.bind(),t.marker.parentNode.insertBefore(n,i),r}var j={"on-*":{function:!0,priority:1e3,unbind:function(t){this.handler&&t.removeEventListener(this.arg,this.handler)},routine:function(t,e){this.handler&&t.removeEventListener(this.arg,this.handler),this.handler=this.eventHandler(e),t.addEventListener(this.arg,this.handler)}},"each-*":{block:!0,priority:4e3,bind:function(t){this.marker?this.iterated.forEach(function(t){t.bind()}):(this.marker=document.createComment(" tinybind: "+this.type+" "),this.iterated=[],t.parentNode.insertBefore(this.marker,t),t.parentNode.removeChild(t))},unbind:function(t){this.iterated&&this.iterated.forEach(function(t){t.unbind()})},routine:function(t,e){var h=this,c=this.arg;e=e||[];var u=t.getAttribute("index-property")||"$index";e.forEach(function(t,e){var i={$parent:h.view.models};i[u]=e,i[c]=t;var n=h.iterated[e];if(n)if(n.models[c]!==t){for(var r=void 0,s=void 0,a=e+1;a<h.iterated.length;a++)if((s=h.iterated[a]).models[c]===t){r=a;break}void 0!==r?(h.iterated.splice(r,1),h.marker.parentNode.insertBefore(s.els[0],n.els[0]),s.models[u]=e):s=_(h,i,n.els[0]),h.iterated.splice(e,0,s)}else n.models[u]=e;else{var o=h.marker;h.iterated.length&&(o=h.iterated[h.iterated.length-1].els[0]),n=_(h,i,o.nextSibling),h.iterated.push(n)}}),this.iterated.length>e.length&&function(t,e){for(var i=0;i<t;i++)e()}(this.iterated.length-e.length,function(){var t=h.iterated.pop();t.unbind(),h.marker.parentNode.removeChild(t.els[0])}),"OPTION"===t.nodeName&&this.view.bindings.forEach(function(t){t.el===h.marker.parentNode&&"value"===t.type&&t.sync()})},update:function(e){var i=this,n={};Object.keys(e).forEach(function(t){t!==i.arg&&(n[t]=e[t])}),this.iterated.forEach(function(t){t.update(n)})}},"class-*":function(t,e){var i=" "+t.className+" ";!e==-1<i.indexOf(" "+this.arg+" ")&&(t.className=e?t.className+" "+this.arg:i.replace(" "+this.arg+" "," ").trim())},text:function(t,e){t.textContent=null!=e?e:""},html:function(t,e){t.innerHTML=null!=e?e:""},show:function(t,e){t.style.display=e?"":"none"},hide:function(t,e){t.style.display=e?"none":""},enabled:function(t,e){t.disabled=!e},disabled:function(t,e){t.disabled=!!e},checked:{publishes:!0,priority:2e3,bind:function(t){var e=this;this.callback||(this.callback=function(){e.publish()}),t.addEventListener("change",this.callback)},unbind:function(t){t.removeEventListener("change",this.callback)},routine:function(t,e){"radio"===t.type?t.checked=E(t.value)===E(e):t.checked=!!e}},value:{publishes:!0,priority:3e3,bind:function(t){if(this.isRadio="INPUT"===t.tagName&&"radio"===t.type,!this.isRadio){this.event=t.getAttribute("event-name")||("SELECT"===t.tagName?"change":"input");var e=this;this.callback||(this.callback=function(){e.publish()}),t.addEventListener(this.event,this.callback)}},unbind:function(t){this.isRadio||t.removeEventListener(this.event,this.callback)},routine:function(t,e){if(this.isRadio)t.setAttribute("value",e);else if("select-multiple"===t.type){if(e instanceof Array)for(var i=0;i<t.length;i++){var n=t[i];n.selected=-1<e.indexOf(n.value)}}else E(e)!==E(t.value)&&(t.value=null!=e?e:"")}},if:{block:!0,priority:4e3,bind:function(t){this.marker?!1===this.bound&&this.nested&&this.nested.bind():(this.marker=document.createComment(" tinybind: "+this.type+" "+this.keypath+" "),this.attached=!1,t.parentNode.insertBefore(this.marker,t),t.parentNode.removeChild(t)),this.bound=!0},unbind:function(){this.nested&&(this.nested.unbind(),this.bound=!1)},routine:function(t,e){!!e!==this.attached&&(e?(this.nested||(this.nested=new O(t,this.view.models,this.view.options),this.nested.bind()),this.marker.parentNode.insertBefore(t,this.marker.nextSibling),this.attached=!0):(t.parentNode.removeChild(t),this.attached=!1))},update:function(t){this.nested&&this.nested.update(t)}}};return b.binders=j,b.adapters["."]=t,b.bind=function(t,e,i){var n={};e=e||{},i=i||{},a.forEach(function(e){n[e]=Object.create(null),i[e]&&Object.keys(i[e]).forEach(function(t){n[e][t]=i[e][t]}),Object.keys(b[e]).forEach(function(t){n[e][t]||(n[e][t]=b[e][t])})}),s.forEach(function(t){var e=i[t];n[t]=null!=e?e:b[t]}),n.starBinders=Object.keys(n.binders).filter(function(t){return 0<t.indexOf("*")}),l.updateOptions(n);var r=new O(t,e,n);return r.bind(),r},b.formatters.negate=b.formatters.not=function(t){return!t},b});
!function(){"use strict";var g={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function y(e){return function(e,t){var r,n,i,s,a,o,p,c,l,u=1,f=e.length,d="";for(n=0;n<f;n++)if("string"==typeof e[n])d+=e[n];else if("object"==typeof e[n]){if((s=e[n]).keys)for(r=t[u],i=0;i<s.keys.length;i++){if(null==r)throw new Error(y('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[i],s.keys[i-1]));r=r[s.keys[i]]}else r=s.param_no?t[s.param_no]:t[u++];if(g.not_type.test(s.type)&&g.not_primitive.test(s.type)&&r instanceof Function&&(r=r()),g.numeric_arg.test(s.type)&&"number"!=typeof r&&isNaN(r))throw new TypeError(y("[sprintf] expecting number but found %T",r));switch(g.number.test(s.type)&&(c=0<=r),s.type){case"b":r=parseInt(r,10).toString(2);break;case"c":r=String.fromCharCode(parseInt(r,10));break;case"d":case"i":r=parseInt(r,10);break;case"j":r=JSON.stringify(r,null,s.width?parseInt(s.width):0);break;case"e":r=s.precision?parseFloat(r).toExponential(s.precision):parseFloat(r).toExponential();break;case"f":r=s.precision?parseFloat(r).toFixed(s.precision):parseFloat(r);break;case"g":r=s.precision?String(Number(r.toPrecision(s.precision))):parseFloat(r);break;case"o":r=(parseInt(r,10)>>>0).toString(8);break;case"s":r=String(r),r=s.precision?r.substring(0,s.precision):r;break;case"t":r=String(!!r),r=s.precision?r.substring(0,s.precision):r;break;case"T":r=Object.prototype.toString.call(r).slice(8,-1).toLowerCase(),r=s.precision?r.substring(0,s.precision):r;break;case"u":r=parseInt(r,10)>>>0;break;case"v":r=r.valueOf(),r=s.precision?r.substring(0,s.precision):r;break;case"x":r=(parseInt(r,10)>>>0).toString(16);break;case"X":r=(parseInt(r,10)>>>0).toString(16).toUpperCase()}g.json.test(s.type)?d+=r:(!g.number.test(s.type)||c&&!s.sign?l="":(l=c?"+":"-",r=r.toString().replace(g.sign,"")),o=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",p=s.width-(l+r).length,a=s.width&&0<p?o.repeat(p):"",d+=s.align?l+r+a:"0"===o?l+a+r:a+l+r)}return d}(function(e){if(p[e])return p[e];var t,r=e,n=[],i=0;for(;r;){if(null!==(t=g.text.exec(r)))n.push(t[0]);else if(null!==(t=g.modulo.exec(r)))n.push("%");else{if(null===(t=g.placeholder.exec(r)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){i|=1;var s=[],a=t[2],o=[];if(null===(o=g.key.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(o[1]);""!==(a=a.substring(o[0].length));)if(null!==(o=g.key_access.exec(a)))s.push(o[1]);else{if(null===(o=g.index_access.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(o[1])}t[2]=s}else i|=2;if(3===i)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}r=r.substring(t[0].length)}return p[e]=n}(e),arguments)}function e(e,t){return y.apply(null,[e].concat(t||[]))}var p=Object.create(null);"undefined"!=typeof exports&&(exports.sprintf=y,exports.vsprintf=e),"undefined"!=typeof window&&(window.sprintf=y,window.vsprintf=e,"function"==typeof define&&define.amd&&define(function(){return{sprintf:y,vsprintf:e}}))}();
function debounce(i,u,a){var c;return function(){var t=this,n=arguments,e=a&&!c;clearTimeout(c),c=setTimeout(function(){c=null,a||i.apply(t,n)},u),e&&i.apply(t,n)}}$(document).on("click","[appNavigate]",function(t){t.preventDefault();var n=$(this).attr("href");n&&app.router.navigate(n)}),$(document).on("tiny-bind-bound",function(){$("select").selectpicker()});
tinybind.config={defaultPrecision:2,defaultThousandSeparator:"'",defaultDecimalSeparator:".",defaultDateFormat:"YYYY-MM-DD",defaultTimeFormat:"HH:mm:ss",defaultDatetimeFormat:"YYYY-MM-DD HH:mm:ss",nav:{open:'<div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a appNavigate class="navbar-brand" href="/">O</a></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav">',close:"</ul></div></div>",item:{open:'<li class="dropdown">',openSub:'<li class="dropdown dropdown-submenu">',rowSub:'<a appNavigate href="%1$s" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">%2$s</a><ul class="dropdown-menu" role="menu">',rowSingle:'<li><a appNavigate href="%1$s">%2$s</a></li>',hr:'<li role="separator" class="divider"></li>',close:"</ul></li>"}}};
tinybind.binders.width=function(i,n){i.style.width=n},tinybind.binders.height=function(i,n){i.style.height=n},tinybind.binders.intcheck={publishes:!0,priority:2e3,bind:function(i){var n=this;this.callback||(this.callback=function(){n.publish()}),i.addEventListener("change",this.callback)},unbind:function(i){i.removeEventListener("change",this.callback)},routine:function(i,n){i.checked=i.value===n},getValue:function(i){return i.checked?i.value:0}};
tinybind.formatters.log=function(t){return console.log(t)},tinybind.formatters.default=function(t,n){return tinybind.formatters.isEmpty(t)?n:t},tinybind.formatters.add=function(t,n){return t+n},tinybind.formatters.sub=function(t,n){return t-n},tinybind.formatters.map=function(t,n,r){var i=Array.prototype.slice.call(arguments);return i.splice(1,2),n[r].apply(n,i)},tinybind.formatters.isBoolean=function(t){return"boolean"==typeof t},tinybind.formatters.isNumeric=function(t){return!isNaN(t)},tinybind.formatters.isNaN=function(t){return!!tinybind.formatters.isArray(t)||isNaN(t)},tinybind.formatters.isInteger=function(t){return t===+t&&t===(0|t)},tinybind.formatters.isFloat=function(t){return 1/0!==t&&t===+t&&t!==(0|t)},tinybind.formatters.isNumber=function(t){return tinybind.formatters.isFloat(t)||tinybind.formatters.isInteger(t)},tinybind.formatters.isObject=function(t){return tinybind.formatters.toBoolean(t)&&"object"==typeof t&&!tinybind.formatters.isArray(t)},tinybind.formatters.isFunction=function(t){return"function"==typeof t},tinybind.formatters.isArray=function(t){return tinybind.formatters.isFunction(Array.isArray)?Array.isArray(t):t instanceof Array},tinybind.formatters.isString=function(t){return"string"==typeof t||t instanceof String},tinybind.formatters.isInfinity=function(t){return t===1/0},tinybind.formatters.toBoolean=function(t){return!!t},tinybind.formatters.toInteger=function(t){var n=parseInt(1*t,10);return isNaN(n)?0:n},tinybind.formatters.toFloat=function(t){var n=parseFloat(1*t);return isNaN(n)?0:n},tinybind.formatters.toDecimal=function(t){var n=tinybind.formatters.toInteger(1*t),r=tinybind.formatters.toFloat(t);return n===r?n:r},tinybind.formatters.toArray=function(t){return tinybind.formatters.isArray(t)?t:tinybind.formatters.isObject(t)?tinybind.formatters.values(t):[t]},tinybind.formatters.toString=function(t){return t?t.toString():""},tinybind.formatters.valuesToString=function(r){return Array.isArray(r)&&r.forEach(function(t,n){r[n]=t.toString()}),r},tinybind.formatters.integer={read:function(t){return tinybind.formatters.toInteger(t)},publish:function(t){return tinybind.formatters.toInteger(t)}},tinybind.formatters.sum=function(t,n){return 1*t+1*n},tinybind.formatters.substract=function(t,n){return 1*t-1*n},tinybind.formatters.multiply=function(t,n){return 1*t*(1*n)},tinybind.formatters.divide=function(t,n){return 1*t/(1*n)},tinybind.formatters.min=function(){return Math.min.apply(Math,arguments)},tinybind.formatters.max=function(){return Math.max.apply(Math,arguments)},tinybind.formatters.isEqual=function(t,n){return t===n},tinybind.formatters.isNotEqual=function(t,n){return t!==n},tinybind.formatters.isLess=function(t,n){return 1*t<1*n},tinybind.formatters.isGreater=function(t,n){return 1*n<1*t},tinybind.formatters.isLessEqual=function(t,n){return 1*t<=1*n},tinybind.formatters.isGreaterEqual=function(t,n){return 1*n<=1*t},tinybind.formatters.or=function(){for(var t=0;t<arguments.length;t++)if(tinybind.formatters.toBoolean(arguments[t]))return!0;return!1},tinybind.formatters.and=function(){for(var t=0;t<arguments.length;t++)if(!tinybind.formatters.toBoolean(arguments[t]))return!1;return!0},tinybind.formatters.negate=function(t){return!tinybind.formatters.toBoolean(t)},tinybind.formatters.if=function(t,n,r){return tinybind.formatters.toBoolean(t)?n:r},tinybind.formatters.numberFormat=function(t,n,r,i){t=tinybind.formatters.isNumber(t)?t:tinybind.formatters.toDecimal(t),tinybind.formatters.isInteger(n)||(n=tinybind.config.defaultPrecision),r||(r=tinybind.config.defaultDecimalSeparator),i||(i=tinybind.config.defaultThousandSeparator);var e=(+(Math.round(+(Math.abs(t)+"e"+n))+"e"+-n)).toFixed(n);return t<0&&(e="-"+e),2===(e=e.split(".")).length?e[0].replace(/\B(?=(\d{3})+(?!\d))/g,i)+r+e[1]:e[0].replace(/\B(?=(\d{3})+(?!\d))/g,i)},tinybind.formatters.date=function(t){return moment(t).format(tinybind.config.defaultDateFormat)},tinybind.formatters.time=function(t){return moment(t).format(tinybind.config.defaultTimeFormat)},tinybind.formatters.datetime=function(t){return moment(t).format(tinybind.config.defaultDatetimeFormat)},tinybind.formatters.toTimestamp=function(t){return moment(t).format("X")},tinybind.formatters.toDate=function(t){return moment.unix(t).toDate()},tinybind.formatters.toMoment=function(t){return moment(t)},tinybind.formatters.dateFormat=function(t,n){return moment(t).format(n)},tinybind.formatters.pairs=function(n){return Object.keys(n).map(function(t){return{object:n,property:t,value:n[t]}})},tinybind.formatters.catalog=function(t,n,r,i){for(var e in r=r||"id",i=i||"value",n)if(n[e][r]==t)return n[e][i];return""},tinybind.formatters.keys=function(t){return Object.keys(t)},tinybind.formatters.values=function(n){return Object.keys(n).map(function(t){return n[t]})},tinybind.formatters.split=function(t,n){return t.split(n)},tinybind.formatters.lower=function(t){return t.toLowerCase()},tinybind.formatters.upper=function(t){return t.toUpperCase()},tinybind.formatters.capitalize=function(t){return(t=tinybind.formatters.toString(t)).split(" ").map(function(t){return t.split("-").map(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}).join("-")}).join(" ")},tinybind.formatters.contains=function(t,n){return-1!==t.indexOf(n)},tinybind.formatters.doesNotContain=function(t,n){return tinybind.formatters.negate(tinybind.formatters.contains(t,n))},tinybind.formatters.prettyPrint=function(t){return JSON.stringify(t,null,2)},tinybind.formatters.isEmpty=function(t){return!tinybind.formatters.toBoolean(t)||0===tinybind.formatters.toArray(t).length},tinybind.formatters.length=function(t){return tinybind.formatters.isString(t)?t.length:tinybind.formatters.toArray(t).length},tinybind.formatters.join=function(t,n){return tinybind.formatters.toArray(t).join(n)},tinybind.formatters.wrap=function(r){var i=Array.prototype.slice.call(arguments);return i.splice(0,1),function(t){var n=i.slice();return Array.prototype.push.apply(n,Array.prototype.slice.call(arguments)),r.apply(this,n)}},tinybind.formatters.delay=function(t,n){var r=this;return function(){setTimeout(function(){t.apply(r,arguments)},n)}},tinybind.formatters.preventDefault=function(n){var r=this;return function(t){return t.preventDefault(),n.call(r,t),!1}},tinybind.formatters.enum=function(t,n){return arguments[parseInt(t)+1]},tinybind.formatters.bootstrap_nav=function(t){var n="";n+=tinybind.config.nav.open;var e=function(t,n){var r="";if(Array.isArray(t.children)){if(t.text){for(var i in r+=n?tinybind.config.nav.item.open:tinybind.config.nav.item.openSub,r+=sprintf(tinybind.config.nav.item.rowSub,t.url,t.text),t.children)t.children[i]&&(r+=e(t.children[i],!1));r+=tinybind.config.nav.item.close}}else t.text&&(r+="{hr}"==t.text?tinybind.config.nav.item.hr:sprintf(tinybind.config.nav.item.rowSingle,t.url,t.text));return r};for(var r in t)t[r]&&(n+=e(t[r],!0));return n+=tinybind.config.nav.close,tinybind.formatters.bootstrap_navINIT||(setInterval(function(){var t=JSON.stringify(app.page.nav);if(t!==tinybind.formatters.app_page_nav){var n=app.page.nav;app.page.nav={},app.page.nav=n}tinybind.formatters.app_page_nav=t},300),tinybind.formatters.bootstrap_navINIT=!0),n},tinybind.formatters.eq=tinybind.formatters.isEqual,tinybind.formatters.ne=function(t,n){return tinybind.formatters.negate(tinybind.formatters.isEqual(t,n))},tinybind.formatters.lt=tinybind.formatters.isLess,tinybind.formatters.gt=tinybind.formatters.isGreater,tinybind.formatters.le=tinybind.formatters.isLessEqual,tinybind.formatters.lte=tinybind.formatters.isLessEqual,tinybind.formatters.ge=tinybind.formatters.isGreaterEqual,tinybind.formatters.gte=tinybind.formatters.isGreaterEqual,tinybind.formatters.prv=tinybind.formatters.preventDefault,tinybind.formatters.format=tinybind.formatters.dateFormat,tinybind.formatters.len=tinybind.formatters.length,tinybind.formatters.def=tinybind.formatters.default,tinybind.formatters.neg=tinybind.formatters.negate,tinybind.formatters.date=tinybind.formatters.dateFormat,tinybind.formatters.stringify=tinybind.formatters.prettyPrint,tinybind.formatters.int=tinybind.formatters.integer,tinybind.formatters.isLower=tinybind.formatters.isLess,tinybind.formatters.isLowerEqual=tinybind.formatters.isLessEqual,tinybind.formatters.stringFormat=sprintf(),tinybind.formatters.inject=sprintf(),tinybind.formatters.sprintf=sprintf();
var app={id:"app",config:{url:"/",ajaxTimeout:5e3,routerRoot:"/",storageCache:2592e3,templateCache:0,clearCache:!1,ajaxCacheBuster:!1,tinyBind:{prefix:"rv",preloadData:!0,rootInterface:".",templateDelimiters:["{","}"]}},bound:void 0,local:{},error:!1,errors:{},model:{},record:{},records:[],page:{},form:{},events:{},triggers:{bound:function(){jQuery("body").trigger("tiny-bind-bound")},unbound:function(){jQuery("body").trigger("tiny-bind-unbound")}},init:function(){var n=this;this.response.change(200,function(e,t){n.setData(e),tinybind.configure(n.config.tinyBind),n.router.check()}),this.request.get(this.config.url)},event:{add:function(e,t){return app.events[e]=t,this}},router:{routes:[],interval:void 0,listening:void 0,check:function(e){e=e||this.getUrl(),console.info("router::check",e),this.listening||(this.listening=this.listen());for(var t=0;t<this.routes.length;t++){var n=e.match(this.routes[t].re);if(n){n.shift(),console.info("router::check::match",this.routes[t].re.toString()),this.routes[t].handler.apply({},n);break}}return this},getUrl:function(){var e="";return e=(e=this._clearSlashes(decodeURI(location.pathname+location.search))).replace(/\?(.*)$/,""),e="/"!==app.config.routerRoot?e.replace(app.config.routerRoot,""):e,this._clearSlashes(e)},add:function(e,t){return"function"==typeof e&&(t=e,e=""),e=(e=(e=(e=(e=this._clearSlashes(e)).replace(new RegExp("/","g"),"\\/")).replace(new RegExp(":any","g"),"[^/]+")).replace(new RegExp(":num","g"),"[0-9]+")).replace(new RegExp(":md5","g"),"[0-9a-f]+"),this.routes.push({re:new RegExp(e),handler:t}),this},remove:function(n){var r=this;return this.routes.forEach(function(e,t){e.handler!==n&&e.re.toString()!==n.toString()||r.routes.splice(t,1)}),this},flush:function(){return this.routes=[],this},listen:function(){var e=this,t=this.getUrl();return clearInterval(this.interval),this.interval=setInterval(function(){t!==e.getUrl()&&(t=e.getUrl(),e.check(t))},50),this},navigate:function(e){return e=e?app.config.routerRoot+this._clearSlashes(e):"",console.info("router::navigate",e),history.pushState(null,null,e),this},_clearSlashes:function(e){return e.toString().replace(/\/$/,"").replace(/^\//,"")}},response:{_handlers:{200:function(e,t,n){console.log(arguments),alert("200 (ok) handler")},201:function(e,t,n){console.log(arguments),alert("201 (created) handler")},202:function(e,t,n){console.log(arguments),alert("202 (accepted) handler")},401:function(e,t,n){console.log(arguments),alert("401 (unauthorized) handler")},404:function(e,t,n){console.log(arguments),alert("404 (not found) handler")},406:function(e,t,n){console.log(arguments),alert("406 (not accepted) handler")},409:function(e,t,n){console.log(arguments),alert("409 (conflict) handler")},500:function(e,t,n){console.log(arguments),alert("500 (server error) handler")}},change:function(e,t){return this._handlers[e]=t,this},add:function(e,t){return this.change(e,t)},handlers:function(e){return jQuery.extend(this._handlers,e)}},request:{send:function(e,t,n,r){return console.info("request::send",e,t,n),jQuery.ajax({method:e,url:t,data:n,dataType:"json",cache:!app.config.ajaxCacheBuster,async:!0,timeout:app.config.ajaxTimeout,statusCode:app.response.handlers(r)}),this},get:function(e,t,n){return this.send("get",e,t,n)},post:function(e,t,n){return this.send("post",e,t,n)},patch:function(e,t,n){return this.send("patch",e,t,n)},delete:function(e,t,n){return this.send("delete",e,t,n)},create:function(e,t,n){return this.send("post",e,t,n)},read:function(e,t,n){return this.send("get",e,t,n)},update:function(e,t,n){return this.send("patch",e,t,n)},insert:function(e,t,n){return this.send("post",e,t,n)}},setData:function(t){var n=this;return console.info("setData",t),["error","errors","model"].forEach(function(e){t[e]&&(n[e]=t[e])}),["page","form","config"].forEach(function(e){t[e]&&(n[e]=jQuery.extend(!0,n[e],t[e]))}),this.records=this.model,this.record=this.model,this.cacheCleanUp(this.config),this},getData:function(){return{error:this.error,errors:this.errors,model:this.model,page:this.page,form:this.form}},cacheCleanUp:function(e){return e.clearCache&&storage.clear(),void 0!==e.olderThanCache&&storage.removeOlderThan(e.olderThanCache),this},loadModel:function(e,t){var n=this;return t?this.loadTemplate(t,function(){n._loadModel(e)}):this._loadModel(e),this},loadTemplate:function(e,o){var i=this,a=e+".template",t=storage.getItem(a,void 0);return t?(document.getElementById(this.id).innerHTML=t,o&&o()):(this.response.change(200,function(e,t,n){var r=e.template.cache?e.template.cache:i.config.templateCache;storage.setItem(a,e.template.source,r),document.getElementById(i.id).innerHTML=e.template.source,o&&o()}),i.request.get(e)),this},_loadModel:function(e,r){var o=this;return this.response.change(200,function(e,t,n){o.triggers.unbound(),o.bound&&o.bound.unbind(),o.setData(e),o.bound=tinybind.bind(document.getElementById(o.id),app),o.triggers.bound(),r&&r()}),o.request.get(e),this}};
var messages=messages||[],notify={stayTime:3,storageKey:"notifyMsg",defaultMsg:"No Message Giving.",defaultStyle:"info",noticeWrapAll:void 0,map:{red:"danger",yellow:"warning",blue:"info",green:"success",danger:"danger",warning:"warning",info:"info",success:"info",error:"danger",failure:"danger"},stay:["danger"],init:function(){return this.noticeWrapAll||(this.noticeWrapAll=jQuery("<div></div>").addClass("notice-wrap").appendTo("body")),this.showAll()},showAll:function(){return this.loadFromStorage().loadFromVariable()},info:function(t,e){return this._autoDetect(t,this.map.info,e)},success:function(t,e){return this._autoDetect(t,this.map.success,e)},error:function(t,e){return this._autoDetect(t,this.map.error,e)},show:function(t,e){return this._show(this.msgObj(t,e))},add:function(t,e,r){return this.save(this.msgObj(t,e)).redirect(r)},redirect:function(t){return t&&("@back"===t?window.history.back():window.location.href=t),this},removeAll:function(){return jQuery(".notice-item-wrapper").each(function(){$(this).remove()}),this},flush:function(){return messages=[],storage.removeItem(this.storageKey),this},loadFromStorage:function(){var t=storage.getItem(this.storageKey,!1);return storage.removeItem(this.storageKey),this._asArray(t)},loadFromVariable:function(){var t=messages;return messages=[],this._asArray(t)},msgObj:function(t,e){var r={};return r.msg=t||this.defaultMsg,r.style=this.map.hasOwnProperty(e)?this.map[e]:this.defaultStyle,r},save:function(t){var e=storage.getItem(this.storageKey,[]);return e.push(t),storage.setItem(this.storageKey,e),this},_show:function(t){var e,r,s=this;return e=jQuery("<div></div>").addClass("notice-item-wrapper"),r=jQuery("<div></div>").hide().addClass("notice-item alert alert-"+t.style).attr("data-dismiss","alert").appendTo(this.noticeWrapAll).html(t.msg).animate({opacity:"show"},600).wrap(e),jQuery("<div></div>").addClass("close").prependTo(r).html("&times;").click(function(t){t.stopPropagation(),s._remove(r)}),-1===this.stay.indexOf(t.style)&&setTimeout(function(){s._remove(r)},1e3*this.stayTime),this},_remove:function(t){return t.animate({opacity:"0"},600,function(){t.parent().animate({height:"0px"},300,function(){t.parent().remove()})}),this},_asArray:function(t){for(var e in t)t.hasOwnProperty(e)&&this._show(t[e]);return this},_autoDetect:function(t,e,r){return r?this.add(t,e,r):this.show(t,e)}};notify.init();
var BoundTableSearch={storageKey:".search",bound:!1,fieldSelector:"#bound-table-search-field",tableSelector:"table.bound-table-search",countSelector:"#table-search-field-count",highlightColor:"#F0F2F7",highlightIcon:"text-info",triggerOnSearch:"BoundTableSearch",element:{},init:function(){if(!this.bound){var e=this;this.element.table=this.tableSelector+" tbody tr",this.element.field=$(this.fieldSelector),this.element.field.on("keyup",debounce(function(){e.search()},500)),this.load(),this.search(),this.bound=!0}},uninit:function(){this.bound=!1},search:function(){var e=this.getField();if("string"==typeof e){if(0<e.length){$(this.element.table).hide();var t=e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&");t=t.replace(/\*/gi,"(.*)"),console.debug("filter regular expression "+t);var i=new RegExp(t,"img");$(this.element.table).filter(function(){return i.test($(this).text().replace(/(\r\n|\n|\r)/gm," "))}).show()}else $(this.element.table).show();jQuery("body").trigger(this.triggerOnSearch,e),this.save(e),this.determineIcons(e),this.updateCount(e)}},updateCount:function(e){var t=$(this.element.table+":visible").length,i=$(this.element.table).length,n=t!==i?t+" of "+i:i;$(this.countSelector).html(n),console.debug('bound table search filtering on "'+e+'" showing '+n)},load:function(){var e=storage.getItem(window.location.pathname+this.storageKey,{});"string"==typeof e.search&&this.setField(e.search)},save:function(e){storage.setItem(window.location.pathname+this.storageKey,{search:e})},setField:function(e){this.element.field.val(e)},getField:function(){return!!this.element.field&&this.element.field.val()},determineIcons:function(e){0<e.length?(this.element.field.css({"background-color":this.highlightColor}),this.element.field.next().addClass(this.highlightIcon)):(this.element.field.css({"background-color":""}),this.element.field.next().removeClass(this.highlightIcon))}};$("body").on("tiny-bind-bound",function(){BoundTableSearch.init()}),$("body").on("tiny-bind-unbound",function(){BoundTableSearch.uninit()});
$(window).scroll(function(){storage.setItem(window.location.pathname+".scroll_pos",$(window).scrollTop())}),$("body").on("tiny-bind-bound",function(){var o=storage.getItem(window.location.pathname+".scroll_pos",null);0<o&&$(window).scrollTop(o)});
var tableSort={iconsAdded:!1,storageKey:".sort",bound:!1,has:!1,class:"table.table-sort",triggerOnSort:"tableSort",dir:void 0,index:void 0,init:function(){if(!this.bound){var t=this;this.addSortIcons(),$(this.class+" thead tr th:not(.nosort)").on("click",function(){t.dir="asc"===t.dir?"desc":"asc",t.index=$(t.class+" thead tr th").index(this)+1,t.sort(t.index,t.dir)}),this.bound=!0,this.load()}},uninit:function(){this.bound=!1,this.iconsAdded=!1},sort:function(t,s){0<t&&(console.debug("Sorting column:"+t+" direction:"+s+" sorting:"+$(this.class+" tbody tr").length),this.determineIcons(t,s),$(this.class+" tbody tr").length&&(tinysort(this.class+" tbody tr",{selector:"td:nth-child("+t+")",order:s,data:"value"},{selector:"td:nth-child("+t+")",order:s}),jQuery("body").trigger(this.triggerOnSort,"sort"))),this.save(t,s)},addSortIcons:function(){this.iconsAdded||($(this.class+" thead tr th:not(.nosort)").prepend('<i class="fa fa-sort"></i> '),this.iconsAdded=!0)},determineIcons:function(t,s){$(this.class+" thead tr th i").removeClass("fa-sort-asc").removeClass("fa-sort-desc").addClass("fa-sort"),$(this.class+" thead tr th").removeClass("active"),$(this.class+" thead tr th:nth-child("+t+") i").addClass("fa-sort-"+s).removeClass("fa-sort"),$(this.class+" thead tr th:nth-child("+t+")").addClass("active")},load:function(){if(this.exists()){var t=storage.getItem(this.getKey(),{});this.index=t.index,this.dir=t.dir,this.sort(this.index,this.dir)}},save:function(t,s){this.exists()&&storage.setItem(this.getKey(),{index:t,dir:s})},getKey:function(){return window.location.pathname+this.storageKey},exists:function(){return 0<$(this.class+" thead tr th:not(.nosort)").length}};$("body").on("tiny-bind-bound",function(){tableSort.init()}),$("body").on("tiny-bind-unbound",function(){tableSort.uninit()});
!function(g,s,e){"use strict";var h="stickyTableHeaders",t=0,o={fixedOffset:0,leftOffset:0,marginTop:0,objDocument:document,objHead:"head",objWindow:s,scrollableArea:s,cacheHeaderHeight:!1,zIndex:3};function n(e,i){var f=this;f.$el=g(e),f.el=e,f.id=t++,f.$el.bind("destroyed",g.proxy(f.teardown,f)),f.$clonedHeader=null,f.$originalHeader=null,f.cachedHeaderHeight=null,f.isSticky=!1,f.hasBeenSticky=!1,f.leftOffset=null,f.topOffset=null,f.init=function(){f.setOptions(i),f.$el.each(function(){var e=g(this);e.css("padding",0),f.$originalHeader=g("thead:first",this),f.$clonedHeader=f.$originalHeader.clone(),e.trigger("clonedHeader."+h,[f.$clonedHeader]),f.$clonedHeader.addClass("tableFloatingHeader"),f.$clonedHeader.css({display:"none",opacity:0}),f.$originalHeader.addClass("tableFloatingHeaderOriginal"),f.$originalHeader.after(f.$clonedHeader),f.$printStyle=g('<style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{position:static !important;}</style>'),f.$head.append(f.$printStyle)}),f.$clonedHeader.find("input, select").attr("disabled",!0),f.updateWidth(),f.toggleHeaders(),f.bind()},f.destroy=function(){f.$el.unbind("destroyed",f.teardown),f.teardown()},f.teardown=function(){f.isSticky&&f.$originalHeader.css("position","static"),g.removeData(f.el,"plugin_"+h),f.unbind(),f.$clonedHeader.remove(),f.$originalHeader.removeClass("tableFloatingHeaderOriginal"),f.$originalHeader.css("visibility","visible"),f.$printStyle.remove(),f.el=null,f.$el=null},f.bind=function(){f.$scrollableArea.on("scroll."+h,f.toggleHeaders),f.isWindowScrolling||(f.$window.on("scroll."+h+f.id,f.setPositionValues),f.$window.on("resize."+h+f.id,f.toggleHeaders)),f.$scrollableArea.on("resize."+h,f.toggleHeaders),f.$scrollableArea.on("resize."+h,f.updateWidth)},f.unbind=function(){f.$scrollableArea.off("."+h,f.toggleHeaders),f.isWindowScrolling||(f.$window.off("."+h+f.id,f.setPositionValues),f.$window.off("."+h+f.id,f.toggleHeaders)),f.$scrollableArea.off("."+h,f.updateWidth)},f.debounce=function(t,o){var n=null;return function(){var e=this,i=arguments;clearTimeout(n),n=setTimeout(function(){t.apply(e,i)},o)}},f.toggleHeaders=f.debounce(function(){f.$el&&f.$el.each(function(){var e,i,t,o=g(this),n=f.isWindowScrolling?isNaN(f.options.fixedOffset)?f.options.fixedOffset.outerHeight():f.options.fixedOffset:f.$scrollableArea.offset().top+(isNaN(f.options.fixedOffset)?0:f.options.fixedOffset),d=o.offset(),a=f.$scrollableArea.scrollTop()+n,l=f.$scrollableArea.scrollLeft(),s=f.isWindowScrolling?a>d.top:n>d.top;if(s&&(i=f.options.cacheHeaderHeight?f.cachedHeaderHeight:f.$clonedHeader.height(),t=(f.isWindowScrolling?a:0)<d.top+o.height()-i-(f.isWindowScrolling?0:n)),s&&t){e=d.left-l+f.options.leftOffset;var r=document.getElementsByTagName("nav")[0],c=r?r.offsetHeight:f.options.marginTop;f.$originalHeader.css({position:"fixed","margin-top":c,top:0,left:e,"z-index":f.options.zIndex}),f.leftOffset=e,f.topOffset=n,f.$clonedHeader.css("display",""),f.isSticky||(f.isSticky=!0,f.updateWidth(),o.trigger("enabledStickiness."+h)),f.setPositionValues()}else f.isSticky&&(f.$originalHeader.css("position","static"),f.$clonedHeader.css("display","none"),f.isSticky=!1,f.resetWidth(g("td,th",f.$clonedHeader),g("td,th",f.$originalHeader)),o.trigger("disabledStickiness."+h))})},0),f.setPositionValues=f.debounce(function(){var e=f.$window.scrollTop(),i=f.$window.scrollLeft();!f.isSticky||e<0||e+f.$window.height()>f.$document.height()||i<0||i+f.$window.width()>f.$document.width()||f.$originalHeader.css({top:f.topOffset-(f.isWindowScrolling?0:e),left:f.leftOffset-(f.isWindowScrolling?0:i)})},0),f.updateWidth=f.debounce(function(){if(f.isSticky){f.$originalHeaderCells||(f.$originalHeaderCells=g("th,td",f.$originalHeader)),f.$clonedHeaderCells||(f.$clonedHeaderCells=g("th,td",f.$clonedHeader));var e=f.getWidth(f.$clonedHeaderCells);f.setWidth(e,f.$clonedHeaderCells,f.$originalHeaderCells),f.$originalHeader.css("width",f.$clonedHeader.width()),f.options.cacheHeaderHeight&&(f.cachedHeaderHeight=f.$clonedHeader.height())}},0),f.getWidth=function(e){var l=[];return e.each(function(e){var i,t=g(this);if("border-box"===t.css("box-sizing")){var o=t[0].getBoundingClientRect();i=o.width?o.width:o.right-o.left}else{if("collapse"===g("th",f.$originalHeader).css("border-collapse"))if(s.getComputedStyle)i=parseFloat(s.getComputedStyle(this,null).width);else{var n=parseFloat(t.css("padding-left")),d=parseFloat(t.css("padding-right")),a=parseFloat(t.css("border-width"));i=t.outerWidth()-n-d-a}else i=t.width()}l[e]=i}),l},f.setWidth=function(t,e,o){e.each(function(e){var i=t[e];o.eq(e).css({"min-width":i,"max-width":i})})},f.resetWidth=function(e,t){e.each(function(e){var i=g(this);t.eq(e).css({"min-width":i.css("min-width"),"max-width":i.css("max-width")})})},f.setOptions=function(e){f.options=g.extend({},o,e),f.$window=g(f.options.objWindow),f.$head=g(f.options.objHead),f.$document=g(f.options.objDocument),f.$scrollableArea=g(f.options.scrollableArea),f.isWindowScrolling=f.$scrollableArea[0]===f.$window[0]},f.updateOptions=function(e){f.setOptions(e),f.unbind(),f.bind(),f.updateWidth(),f.toggleHeaders()},f.init()}g.fn[h]=function(i){return this.each(function(){var e=g.data(this,"plugin_"+h);e?"string"==typeof i?e[i].apply(e):e.updateOptions(i):"destroy"!==i&&g.data(this,"plugin_"+h,new n(this,i))})}}(jQuery,window),$("body").on("tiny-bind-bound",function(){console.log("bind sticky header "+$(".navbar-fixed-top").outerHeight()),$(".table-sticky-header").stickyTableHeaders({marginTop:$(".navbar-fixed-top")})});
app.config.url="/get/configuration",app.config.layoutUrl="/get/layout",app.router.add("multi/edit/(:num)",function(a){app.loadModel("/multi/edit/"+a,app.config.layoutUrl+"/multi/details")}).add("multi/create",function(){app.loadModel("/multi/create",app.config.layoutUrl+"/multi/details")}).add("multi",function(){app.loadModel("/multi/index",app.config.layoutUrl+"/multi/index")}).add("people/edit/(:num)",function(a){app.loadModel("/people/edit/"+a,app.config.layoutUrl+"/people/details")}).add("people/create",function(){app.loadModel("/people/create",app.config.layoutUrl+"/people/details")}).add("people",function(){app.loadModel("/people/index",app.config.layoutUrl+"/people/index")}).add("zipcodes/edit/(:num)",function(a){app.loadModel("/zipcodes/edit/"+a,app.config.layoutUrl+"/zipcodes/details")}).add("zipcodes/create",function(){app.loadModel("/zipcodes/create",app.config.layoutUrl+"/zipcodes/details")}).add("zipcodes",function(){app.loadModel("/zipcodes/index",app.config.layoutUrl+"/zipcodes/index")}).add("catalog/edit/(:num)",function(a){app.loadModel("/catalog/edit/"+a,app.config.layoutUrl+"/catalog/details")}).add("catalog/create",function(){app.loadModel("/catalog/create",app.config.layoutUrl+"/catalog/details")}).add("catalog",function(){app.loadModel("/catalog/index",app.config.layoutUrl+"/catalog/index")}).add("robot/edit/(:num)",function(a){app.loadModel("/robot/edit/"+a,app.config.layoutUrl+"/robot/details")}).add("robot/create",function(){app.loadModel("/robot/create",app.config.layoutUrl+"/robot/details")}).add(function(){app.loadModel("/robot/index",app.config.layoutUrl+"/robot/index")}),app.response.change(404,function(a,e,o){app.loadTemplate(app.config.layoutUrl+"/notfound")}),app.event.add("goto",function(a,e){e.preventDefault(),notify.removeAll(),app.router.navigate(a)}).add("create",function(a,e){e.preventDefault(),app.router.navigate(a+"/create")}).add("edit",function(a,e,o){o.preventDefault(),app.router.navigate(a+"/edit/"+e)}).add("delete",function(e,o,a){a.preventDefault(),app.local.closest_tr=jQuery(this).closest("tr"),bootbox.confirm({message:"Are you sure you want to delete this record?",buttons:{cancel:{label:'<i class="fa fa-times"></i> Cancel'},confirm:{label:'<i class="fa fa-trash"></i> Delete',className:"btn-danger"}},callback:function(a){a&&(app.response.change(202,function(a,e,o){app.local.closest_tr.remove()}),app.request.delete(e+"/delete/"+o))}})}).add("submit",function(a){a.preventDefault(),app.response.change(201,function(a,e,o){notify.removeAll(),app.router.navigate(app.page.path)}),app.response.change(202,function(a,e,o){notify.removeAll(),app.router.navigate(app.page.path)}),app.response.change(406,function(a,e,o){if(app.setData(a.responseJSON),app.error)for(var t in notify.removeAll(),app.errors)for(var p in app.errors[t])console.log(app.errors[t][p]),notify.error(app.errors[t][p])}),app.request[app.form.method](app.form.action,app.getData())});
document.addEventListener("DOMContentLoaded",function(n){app.init()});