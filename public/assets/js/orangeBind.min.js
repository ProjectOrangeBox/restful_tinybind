var app={id:"#app",local:{},error:!1,errors:{},record:{},records:[],page:{},form:{},events:{},_templates:[],bound:void 0,init(){app.helpers.route()},event:{add(e,r){return app.events[e]=r,this}},router:{routes:[],mode:null,root:"/",config:function(e){return this.mode=e&&e.mode&&"history"==e.mode&&history.pushState?"history":"hash",this.root=e&&e.root?"/"+this.clearSlashes(e.root)+"/":"/",this},getFragment:function(){var e="";if("history"===this.mode)e=(e=this.clearSlashes(decodeURI(location.pathname+location.search))).replace(/\?(.*)$/,""),e="/"!=this.root?e.replace(this.root,""):e;else{var r=window.location.href.match(/#(.*)$/);e=r?r[1]:""}return this.clearSlashes(e)},clearSlashes:function(e){return e.toString().replace(/\/$/,"").replace(/^\//,"")},add:function(e,r){return"function"==typeof e&&(r=e,e=""),this.routes.push({re:e,handler:r}),this},remove:function(e){for(var r,t=0;this.routes.length,r=this.routes[t];t++)if(r.handler===e||r.re.toString()===e.toString())return this.routes.splice(t,1),this;return this},flush:function(){return this.routes=[],this.mode=null,this.root="/",this},check:function(e){for(var r=e||this.getFragment(),t=0;t<this.routes.length;t++){var o=r.match(this.routes[t].re);if(o)return o.shift(),this.routes[t].handler.apply({},o),this}return this},listen:function(){var e=this,r=e.getFragment();return clearInterval(this.interval),this.interval=setInterval(function(){r!==e.getFragment()&&(r=e.getFragment(),e.check(r))},50),this},navigate:function(e){return e=e||"","history"===this.mode?history.pushState(null,null,this.root+this.clearSlashes(e)):window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+e,this}},helpers:{response:{200:function(e,r,t){console.log(arguments),alert("200 (ok) handler")},201:function(e,r,t){console.log(arguments),alert("201 (created) handler")},202:function(e,r,t){console.log(arguments),alert("202 (accepted) handler")},401:function(e,r,t){console.log(arguments),alert("401 (unauthorized) handler")},404:function(e,r,t){console.log(arguments),alert("404 (not found) handler")},406:function(e,r,t){console.log(arguments),alert("406 (not accepted) handler")},409:function(e,r,t){console.log(arguments),alert("409 (conflict) handler")},500:function(e,r,t){console.log(arguments),alert("500 (server error) handler")}},ajax(e,r,t,o){jQuery.ajax({method:e,url:r,data:t,dataType:"json",cache:!1,timeout:5e3,async:!0,statusCode:Object.assign(app.helpers.response,o)})},getHandlers:()=>app.helpers.response,setData(e){e.error&&(app.error=e.error),e.errors&&(app.errors=e.errors),e.model&&(Array.isArray(e.model)?(app.records=e.model,app.record=void 0):(app.record=e.model,app.records=void 0));var r=["page","form"];for(var t in r){var o=r[t];if(null!=e[o])for(subkey in e[o])app[o][subkey]=e[o][subkey]}},getData:()=>({error:app.error,errors:app.errors,model:app.helpers.getModel(),page:app.page,form:app.form}),modelIsA:()=>app.record?"object":"array",getModel:()=>model=app.record?app.record:app.records,load(e,r){jQuery("body").trigger("bound",!1),app.helpers.response[200]=function(e,r,t){app.helpers.setData(e),app.bound=tinybind.bind(document.querySelector(app.id),app),jQuery("body").trigger("bound",!0)},app._templates[e]?(jQuery(app.id).html(app._templates[e]),r&&app.helpers.ajax("get",r,{},app.helpers.getHandlers())):jQuery.get(e,function(t){app._templates[e]=t,jQuery(app.id).html(app._templates[e]),r&&app.helpers.ajax("get",r,{},app.helpers.getHandlers())})},route(e){e=e||window.location.pathname,app.router.isSetup||(app.router.isSetup=!0,app.router.config({mode:"history"}).listen()),app.router.check(e)}}};document.addEventListener("DOMContentLoaded",function(){app.init()});
//# sourceMappingURL=orangeBind.min.js.map